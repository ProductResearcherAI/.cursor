---
description: 
globs: 
alwaysApply: false
---
<rule_metadata>
description: Meta-rule for client communication analysis workflow, including data cleaning, knowledge extraction, verification, and synthesis
globs: .cursor/rules/*.mdc
alwaysApply: false
</rule_metadata>

<rule_title>Meta-Rule: Analysis-Synthesis Workflow</rule_title>

<rule_context>
Перед исполнением этого воркфлоу ознакомься и руководствуйся основным правилом '000-cursor-rules.mdc'
</rule_context>

<agent_work_mode>
- Работа ведется только в среде Cursor
- Агент напрямую исполняет правила как промпты без дополнительного редактирования
- Создает структуру папок для каждого этапа и респондента
- Обеспечивает возможность возврата к любому этапу для любого респондента
- Позволяет выборочно включать резульаты анадиза респондентов в синтез
</agent_work_mode>

<version>3.1.0</version>

<copilot_interaction>
Режим работы AI агента только второй пилот: AI агент активно предлагает действия, но утверждает правила действий и результаты действий с человеком. Каждый результат записывается в соответствующий файл проекта в структуре проекта
</copilot_interaction>

<workflow_stages>
1. Постановка целей
   1.1 Определение исследовательских целей, стадии, бизнес-проблемы, аудитории, контекста исследований, гипотез и ограничений
   - AI агент начинает любой проект с выявления в беседе с исследователем:
     - На какой стадии находится исследование (планируется, вопросы составлены, интервью проведены) - тег `<ResearchStage>`
     - Цели исследования - тег `<ResearchGoals>`
     - Описание бизнес-проблемы - тег `<BusinessProblem>`
     - Целевую аудиторию исследования - тег `<TargetAudience>`
     - Контекст исследования - тег `<ResearchContext>`
     - Ограничения исследования (если есть) - тег `<Limitations>`
     - Предварительные гипотезы (если есть) - тег `<Hypotheses>`
     - Существующие вопросы (если есть) - тег `<ExistingQuestions>`
     - Транскрибации проведенных интервью (если есть) - тег `<TranscriptionText>`
   - AI агент анализирует бизнес-задачу в соответствии с правилом `1.1.1_business_task_types_rule.mdc` для определения типа задачи и `1.1.2_business_task_formulation_rule.mdc` для формулирования и декомпозиции задачи и предлагает свои дополнения которые затем утверждает с исследователем
   - AI агент использует полученную информацию для адаптации исследования и формирования исследовательских вопросов
   Каждое действие утверждается исследователем и результат перезаписывается в соответствующий файл, только после этого агент приступает к следующему этапу

   1.2 Определение исследовательских вопросов на основе целей исследования
   - AI агент использует правило `1.2.1_research_questions_definition_rule.mdc` для  взаимодействия с человеком при определении исследовательских вопросов
   - AI агент анализирует текущее состояние исследования и действует в зависимости от стадии:
     - Если исследование только планируется: предлагает исследователю дефолтные вопросы с использованием библиотеки дефолтных вопросов (`1.2.2_default_research_questions_library.mdc`) и утверждает их
     - Если вопросы составлены, но интервью не проведены: анализирует и дополняет существующие вопросы с использованием библиотеки дефолтных вопросов, вносит в библиотеку дефолтных вопросов изменения предложенные исследователем и обновляет вопросы в папке проекта
     - Если интервью уже проведены: предлагает исследователю пооаналитзировать вопросы интервью и добавить в исследовательские вопросы проекта другие вопросы и осуществляет это после согласия исследователя
   - AI агент обязательно сохраняет утвержденные исследовательские вопросы в проектной структуре в папке `0_business_task` в форматах MD, в перечень актуальных вопросов

   1.3 Расчет емкости рынка (TAM/SAM/SOM)
   - AI агент предлагает исследователю оценить объем рынка для понимания потенциала бизнеса перед началом интервью с возможностью уточнения после их проведения
   - AI агент объясняет, что предварительная оценка емкости рынка поможет:
     - Определить объем возможностей для бизнеса
     - Сфокусировать интервью на наиболее перспективных сегментах
     - Получить базовые гипотезы для последующей верификации в интервью
     - Уточнить расчеты после получения инсайтов от респондентов
   - AI агент демонстрирует практическую ценность расчета емкости рынка, предлагая показать демо-результат жкспресс-расчета из библиотеки `.cursor/libraries/b2c/market_capacity_calculation_example.mdc` для обоснования эффективности использования данного подхода
   - После утверждения исследователем необходимости расчета емкости рынка, AI агент использует правило `1.3.1_market_capacity_research_rule.mdc` для проведения деск-исследования и расчетов
   - Процесс включает:
     - Формулирование расчетных гипотез на основе утвержденных бизнес-задач и исследуемых сегментов
     - Утверждение расчетных гипотез с исследователем
     - Создание плана расчета емкости рынка
     - Создание папки `Market_Capacity` в директории `0_business_task`
     - Поиск и сбор релевантных данных из открытых источников (текущий год или год-1)
     - Создание файла с источниками данных для каждой гипотезы
     - Проверка достаточности данных для расчетов
     - Выполнение калькуляции TAM/SAM/SOM
     - Создание итогового файла с расчетами и CSV таблицы с результатами
   - AI агент обязательно сохраняет все материалы исследования в папке `0_business_task/Market_Capacity`
   - AI агент не переходит к следующему этапу без явного согласования результатов расчета емкости рынка с исследователем

3. Подготовка к интервью
   3.1 Определение фреймворка для определения потребностей пользователей
   - AI агент предлагает по дефолту фреймворк JTBD и его структуру исходя из правила `2.1.1_jtbd_framework_rule.mdc`
   - AI агент предлагает исследователю показать демо-результат фреймворка и его заполнения на основе библиотеки:
     - Для B2C проектов: демонстрирует содержимое `.cursor/libraries/b2c/framework_structure.mdc` (структура фреймворка) и `.cursor/libraries/b2c/framework_filled_example.mdc` (заполненный пример)
     - Для B2B проектов: ссылается на библиотеку `.cursor/libraries/b2b/` (пометка: директория пока не создана)
   - AI агент объясняет практическую ценность элементов фреймворка, показывая как структура помогает выявить потребности и как заполненный пример демонстрирует глубину анализа
   - AI агент собирает обратную связь от пользователя и предлагает к утверждению конкретные элементы фреймворка
   - AI агент интересуется у исследователя, вести ли в прямом режиме по ходу проекта граф задач сегмента клиентов в специфике контекста их потребностей
   - AI агент объясняет, что ведение графа задач в реальном времени позволяет:
     - Обновлять граф уникальных потребностей прямо в процессе анализа каждого интервью
     - Пересчитывать емкость рынка с учетом выявленных потребностей (более точно определяя SAM от закрытых потребностей в денежном выражении)
     - Не тратить время на построение графа задач в конце проекта при подготовке отчета
     - Создавать консолидированную таблицу потребностей, которая обновляется по ходу анализа каждого интервью или анализа интервью по сегментно
     - В случае положительного ответа исследователем, агент использует правило "2_interview_preparation\2.4.1_realtime_customer_jobs_graph_rule.mdc" для создания и ведения графа
   - В другом случае псле утверждения исследователем фреймворка, агент создает файл с Framework_structure.md в папке с названием проекта, в файле содержатся выбранные элементы фреймворка + раздел с пояснением как применение элементов поможет получить ответы на исследовательские вопросы и достичь бизнес-целей
   - На основании утвержденного фреймворка Framework_structure.md  AI агент использует правила `2.1.2_needs_formulation_rule.mdc` для формулирования потребностей и `2.1.3_needs_formulation_verification_rule.mdc` для верификации формулировок потребностей, сохраняя их консистентность
   - На основании утвержденного фреймворка AI агент предлагает дополнения к вопросам интервью для выявления элементов графа потребностей в соответствии с фреймворком во время интервью, для этого использует библиотеку вопросов для выявления потребностей

   3.2 Определение вопросов интервью на основе исследовательских вопросов и выбранного фреймворка
   - AI агент работает в два этапа:

   Этап 1 - Базовые вопросы для исследовательских целей:
   - Использует правило `2.2.1_interview_questions_definition_rule.mdc`
   - Анализирует утвержденные исследовательские вопросы (см. этап 1.2)
   - Формулирует 2 вопроса интервью для каждого исследовательского вопроса
   - Группирует вопросы по тематическим блокам
   - Сохраняет черновик вопросов в `interview_preparation/` (например, `interview_guide*.md`)
   
   Этап 2 - Вопросы для выявления потребностей и недополученной ценности (на основе фреймворка):
   - Анализирует утвержденный фреймворк в файле `Framework_structure.md` (создается на этапе 3.1).
   - Соотносит вопросы, сформулированные на Этапе 1, с элементами утвержденного фреймворка.
   - Выявляет, какие элементы фреймворка недостаточно раскрыты существующими вопросами.
   - На основе правила с детализирующими JTBD-вопросами (`2.2.2_JTBD_Questions`) предлагает добавить конкретные вопросы или блоки вопросов для глубокого "прокапывания" недостающих элементов фреймворка (например, для детализации проблем, ценностей, драйверов, барьеров и т.д.).
   - **Согласование с исследователем:** Представляет исследователю предложенные дополнительные вопросы и уточняет, какие из них являются приоритетными для детального изучения в рамках интервью (учитывая ограничения по времени). Может предложить свою приоритизацию.
   - **Финализация:** Только после утверждения исследователем приоритетов и конкретных формулировок, AI агент интегрирует утвержденные детализирующие вопросы в соответствующие тематические блоки гайдов интервью (`interview_preparation/interview_guides/guide_*.md`).
   
   Процесс поддержки:
   - Обновляет вопросы/гайды после каждого этапа согласования.
   - Добавляет подсказки для интервьюера по ходу доработки гайда (на этапе 2.3).
   - Утверждает все изменения с исследователем.

   3.3 Создание гайда интервью на основе вопросов интервью
   - AI агент использует правило `2.3.1_interview_guide_creation_rule.mdc` для создания структурированного гайда интервью
   - Процесс включает:
     - Анализ утвержденных вопросов интервью
     - Структурирование гайда с четкими разделами (введение, блоки вопросов, заключение)
     - Добавление подсказок и инструкций для интервьюера
     - Представление проекта гайда интервью исследователю для обсуждения и корректировки
     - Внесение изменений на основе обратной связи
   - Гайд интервью должен иметь логическую структуру с последовательностью от общих вопросов к частным
   - AI агент обязательно сохраняет согласованный гайд в проектной структуре в папке `1_data_preparation` в форматах MD
   - AI агент не переходит к следующему этапу без явного согласования гайда интервью с исследователем

4. Организация интервью
   4.1 Проведение тестового интервью с синтетическим респондентом
   - AI агент предлагает исследователю провести тестовое интервью с синтетическим респондентом перед реальными интервью
   - AI агент использует правило `3.1.1_synthetic_respondent_interview_rule.mdc` для проведения тестового интервью
   - Процесс включает:
     - AI агент выступает в роли респондента, отвечая на вопросы из гайда интервью
     - Исследователь задает вопросы по гайду и уточняющие вопросы
     - AI агент предлагает исследователю уточняющие вопросы в ключевых моментах
     - AI агент фиксирует все вопросы и ответы в структурированном виде
     - AI агент формирует гипотезы о потребностях на основе ответов синтетического респондента
     - AI агент предлагает рекомендации по улучшению гайда интервью
   - AI агент сохраняет результаты тестового интервью в проектной структуре в папке `1_data_preparation/synthetic_respondent_[timestamp]`
   - AI агент использует правило `3.1.2_interview_questions_extraction_rule.mdc` для извлечения вопросов из тестового интервью и их интеграции в гайд
   - AI агент не переходит к следующему этапу без явного согласования результатов тестового интервью с исследователем

   4.2 Создание интро и фоллоу-ап сообщений для приглашения респондентов
   - AI агент предлагает исследователю создать вовлекающие сообщения для приглашения потенциальных респондентов на интервью
   - AI агент использует правило `3.2.1_interview_invitation_messages_rule.mdc` для создания интро и фоллоу-ап сообщений
   - Процесс включает:
     - Анализ гипотез, выявленных в ходе интервью с синтетическими респондентами 
     - Анализ гипотез, которые предложит исследователь
     - Формулирование верхнеуровневых бизнес-задач, которые решает продукт
     - Разработку двух вариантов интро-сообщений с фокусом на инновационности и УСП
     - Разработку двух вариантов фоллоу-ап сообщений, дополняющих первичные сообщения
     - Обоснование созданных сообщений с точки зрения выявленных потребностей
   - AI агент сохраняет разработанные сообщения в проектной структуре в папке `interview_preparation`
   - AI агент не переходит к следующему этапу без явного согласования сообщений с исследователем

   4.3 Персонализированная коммуникация с респондентами
   - AI агент предлагает исследователю создать персонализированные сообщения для приглашения конкретных респондентов на интервью
   - AI агент использует правило `3.3.1_interview_personalized_messages_rule.mdc` для создания персонализированных интро и фоллоу-ап сообщений
   - Процесс включает:
     - Сбор информации о респондентах (имя, контактные данные, местоположение, временная зона)
     - Сбор информации о предыдущем опыте взаимодействия респондентов с продуктом/сервисом
     - Создание списка респондентов с контактными данными
     - Адаптацию шаблонов сообщений с учетом профессионального опыта и интересов каждого респондента
     - Расчет временных зон и определение оптимального времени для проведения интервью
     - Персонализацию предложений по времени проведения интервью с учетом временных зон
     - Проверку и валидацию всей информации о респондентах и расчетов временных зон
   - AI агент сохраняет список респондентов в проектной структуре в файле `interview_preparation/respondent_list.md`
   - AI агент сохраняет персонализированные сообщения в проектной структуре в файле `interview_preparation/personalized_messages.md`
   - AI агент не переходит к следующему этапу без явного согласования персонализированных сообщений с исследователем

5. Анализ интервью и формулирование потребностей
   5.1 Определение границ исследования: фактов из историй общения с клиентами, которые будут использоваться для ответа на исследовательские вопросы, и содержания диалога с пользователем, который не имеет смысла
   - АI агент вместе с исследователем выбирает что исключить из анализа интервью с клиентами и удалить из текста -нерелевантные исследованию данные, ответы на которые не дадут прояснение любых исследовательских вопросов
   - Используйте правило `4.1.1_text_cleaning_rule.mdc` для определения и редактирования критериев очистки текста
   - AI агент ОБЯЗАТЕЛЬНО спрашивает исследователя о подходе к обработке реплик интервьюера: удалять ли реплики исследователя из очищенных транскрибаций интервью или сохранять их
   - AI агент объясняет отличие ценности каждого подхода:
     * **Очистка от реплик интервьюера (4.1.2.1):** позволяет сосредоточиться исключительно на ответах респондента, исключая риск переноса инсайтов и интерпретаций исследователя в выводы по интервью. Рекомендуется для анализа "чистых" потребностей клиентов
     * **Сохранение реплик интервьюера (4.1.2.2):** сохраняет полный контекст интервью, включая ценные инсайты исследователя, если они релевантны бизнес-задаче. Рекомендуется когда комментарии исследователя содержат важные наблюдения или уточнения
   - Используйте правило `4.1.2.1_interviewer_remarks_removal_rule.mdc` для полного удаления реплик интервьюера
   - Используйте правило `4.1.2.2_interviewer_remarks_preservation_rule.mdc` для сохранения реплик интервьюера с их обработкой

   5.2 Подготовка историй общения с клиентами, очищение историй от фрагментов, которые не попадают в границы исследования
   - AI агент предлагает исследователю критерии очистки текста в соответствии с правилами п. 4.1
   - Исследователь анализирует предложенные критерии и предоставляет обратную связь
   - AI агент вносит корректировки в правила на основе обратной связи
   - Исследователь утверждает финальную версию правил
   - AI агент выполняет очистку текста с использованием утвержденных правил как промптов

   5.3 Анализ историй общения с клиентами: извлечение вопросов и распределение цитат
   
   5.3.1 - Извлечение и структурирование вопросов интервью:
   - AI агент:
     - Получает базовые вопросы интервью из файла в папке проекта (п.4) в файле interview_questions.md
     - Анализирует транскрибацию интервью в папке с именем респондента
     - Извлекает дополнительные вопросы из транскрибации согласно `3.1.2_interview_questions_extraction_rule.mdc`
     - Объединяет базовые и извлеченные вопросы в иерархическую структуру
     - Сохраняет в папку респондента в файл `interview_questions_<respondent_name>.md`
   
   5.3.2 - Распределение цитат по вопросам:
   - AI агент использует последовательно правила:
     - `4.3.1_quotes_distribution_rule.mdc` для извлечения цитат
     - `4.3.2_quotes_distribution_verification_rule.mdc` для проверки корректности
     - `4.3.3_quotes_rag_structuring_rule.mdc` для структурирования
   - Сохраняет результат в папку респондента в файл `interview_answers_<respondent_name>.md`
   
   Процесс поддержки:
   - Утверждает с исследователем структуру и содержание файлов
   - Обновляет файлы при получении обратной связи
   - Сохраняет все изменения в соответствующие файлы проекта

   5.4 Идентификация и обогащение значимых цитат из интервью
   - AI агент предлагает исследователю критерии идентификации и обогащения цитат в соответствии с правилами `4.4.1_quotes_identification_rule.mdc` и `4.4.2_quotes_enrichment_rule.mdc`
   - Исследователь анализирует предложенные критерии и предоставляет обратную связь
   - AI агент вносит корректировки в правила на основе обратной связи
   - Исследователь утверждает финальную версию правил
   - AI агент выполняет идентификацию и обогащение цитат с использованием утвержденных правил как промптов
   - Если исследователь предоставляет обратную связь о том, что не все значимые цитаты были выявлены, AI агент корректирует критерии идентификации и обогащения цитат и повторяет процесс

   5.5 Анализ ответов на исследовательские вопросы и формулирование потребностей клиентов
   
   **5.5.1 Предложение этапов обработки потребностей**
   - AI агент предлагает исследователю выбрать степень защиты информации при работе с потребностями клиентов:
     
     **Вариант 1: Только формулирование потребностей**
     - Использует правило `2.1.0_interview_analysis_rule.mdc` для базового анализа и формулирования потребностей
     - Преимущества: быстрое получение результатов для первичного понимания потребностей
     - Риски: возможные неточности в формулировках, смешение категорий, общие формулировки
     - Подходит для: пилотных исследований, экспресс-анализа, ограниченног времени
     
     **Вариант 2: Формулирование + верификация качества**
     - Использует правило `2.1.0_interview_analysis_rule.mdc` + `2.1.2_needs_verification_rule.mdc`
     - Преимущества: проверка корректности размещения элементов по категориям, устранение общих фраз, соответствие фреймворку
     - Риски: умеренная защита от ошибок интерпретации данных интервью
     - Подходит для: большинства коммерческих проектов, где важна точность формулировок
     
     **Вариант 3: Формулирование + верификация качества + проверка достоверности**
     - Использует правило `2.1.0_interview_analysis_rule.mdc` + `2.1.2_needs_verification_rule.mdc` + `2.1.3_needs_formulation_verification_rule.mdc`
     - Преимущества: максимальная защита от ошибок, проверка достоверности данных, высокое качество результатов
     - Затраты: дополнительное время на тщательную проверку
     - Подходит для: критически важных проектов, стратегических решений, высокобюджетных исследований
   
   - AI агент демонстрирует практическую ценность каждого варианта, показывая демо-результат из библиотеки `.cursor/libraries/b2c/verified_formulations_library.mdc`
   - AI агент объясняет, как каждый уровень защиты помогает минимизировать риски для результатов проекта:
     - Снижение вероятности принятия неверных продуктовых решений
     - Повышение качества формулировок для разработки решений
     - Обеспечение соответствия анализа стандартам фреймворка JTBD
   - AI агент запрашивает выбор исследователя и утверждение плана действий
   
   **5.5.2 Формулирование потребностей клиентов**
   - AI агент использует правило `2.1.0_interview_analysis_rule.mdc` для формулирования потребностей клиентов
   - AI агент обеспечивает соблюдение принципа недопущения общих фраз, используя конкретные, уникальные формулировки
   - AI агент формулирует потребности клиентов с использованием актуальной структуры фреймворка из файла `framework_structure.md`
   - AI агент сохраняет результаты формулирования в соответствующих файлах проекта
   
   **5.5.3 Верификация качества формулировок (при выборе вариантов 2 или 3)**
   - AI агент использует правило `2.1.2_needs_verification_rule.mdc` для верификации корректности формулировок и размещения элементов потребностей
   - AI агент проверяет соответствие формулировок принципам фреймворка JTBD
   - AI агент использует библиотеку `.cursor/libraries/b2c/verified_formulations_library.mdc` как эталонные примеры или предлагает создать библиотеку в папке project_rules проекта, если таковой библиотеки, релевантной проекту нет
   - AI агент представляет предлагаемые изменения в структурированном виде с пояснениями
   - AI агент вносит изменения только после явного подтверждения исследователя
   
   **5.5.4 Проверка достоверности формулировок (при выборе варианта 3)**
   - AI агент использует правило `2.1.3_needs_formulation_verification_rule.mdc` для проверки достоверности интерпретации данных интервью при формулировании элементов фреймворк
   - AI агент проверяет соответствие формулировок потребностей фактическим высказываниям респондентов
   - AI агент проверяет отсутствие необоснованных предположений и интерпретаций
   - AI агент обеспечивает высший уровень качества и надежности результатов анализа
   
   **5.5.5 Обновление правил проекта**
   - AI агент обновляет файл `Project_Steps.md`, указывая выбранные этапы обработки потребностей
   - AI агент создает или обновляет соответствующие правила в папке `project_rules/` проекта
   - AI агент логирует выбранную степень защиты и выполненные этапы в `LOG.MD` проекта
   - AI агент не переходит к следующему этапу без явного согласования всех результатов с исследователем

6. Консолидация потребностей перед синтезом
   6.1 Предложение исследователю собрать все потребности для синтеза
   - AI агент предлагает исследователю после завершения анализа всех интервью собрать все выявленные потребности респондентов в единое табличное представление для последующего поиска общих паттернов (синтеза)
   - AI агент поясняет исследователю цель консолидации: создание структурированного представления данных для выявления общих паттернов потребностей между респондентами
   - AI агент запрашивает подтверждение исследователя на переход к этапу консолидации
    
   6.2 Предложение критериев консолидации и уточнение сегментов на основе сегмента
   - AI агент анализирует файл бизнес-задач проекта (из папки `0_business_task`) для понимания контекста и целей исследования, и идентификации исследуемых сегментов пользователей, данные о которых будут консолидированы перед синтезом
   - AI агент анадизирует фреймворк `framework_structure.md` в папке проекта для определения критериев по которым были сформированы потребности каждого из респондентов и сегментов респонтов для решения бизнес-задачи 
   - AI агент изучает дефолтные фреймворки консолидации и соотносит их  с фреймворком `framework_structure.md` для сопоставления критериеа:
     - Для сегмента А (лояльные клиенты): 
     `5_segment_knowledge/5.1.1_consolidation_framework_segment_A.mdc` с фокусом на aha-моменты, удовлетворенные потребности, драйверы лояльности
     - Для сегмента Б (ушедшие клиенты):
     `5_segment_knowledge/5.1.2_consolidation_framework_segment_B.mdc` с фокусом на точки выхода из продукта, неоправданные ожидания, барьеры
     - Для сегмента С (потенциальные клиенты):
     `5_segment_knowledge/5.1.3_consolidation_framework_segment_C.mdc` с фокусом на барьеры входа, мотивационные факторы
   -  AI агент предлагает создать таблицы респондентов для табличного представления отдельно по сегментам поясняя выбор сегментов в разрезе бизнес-задачи:
     - А - лояльные клиенты (используют продукт и довольны)
     - Б - ушедшие клиенты (churn - использовали продукт, но отказались от него)
     - С - потенциальные клиенты (не используют продукт, но рассматривают возможность)
     - AI агент уточняет у исследователя, потребности каких именно сегментов пользователей будут объединяться в консолидированную таблицу (А, Б, С или другие сегменты, определенные исследователем) перед синтезом
   - При объяснении AI агент предлагает демо-результат на основе созданных библиотек примеров:
     (здесь указаны b2c примеры)
     - `.cursor/libraries/consolidation_examples_loyal_customers.mdc` для сегмента А
     - `.cursor/libraries/consolidation_examples_churned_customers.mdc` для сегмента Б

   6.3 Утверждение критериев консолидации с исследователем
   - AI агент представляет исследователю выбранные дефолтные критерии консолидации из соответствующего сегментного правила
   - AI агент объясняет важность каждого элемента фреймворка в контексте:
     - Бизнес-задач проекта (ссылаясь на анализ файла бизнес-задач)
     - Особенностей исследуемого сегмента респондентов
     - Возможности получения ответов на исследовательские вопросы
   - AI агент предлагает исследователю возможность адаптации фреймворка:
     - **Использовать консолидированные данные с учетом уже собранного графа задач в реальном времени** (если на этапе 3.1 было выбрано ведение графа в реальном времени)
     - Использовать существующий фреймворк `framework_structure.md`
     - Добавить в него специфичные для сегментов (А, Б, C) элементы на основании `5.1.1.consolidation_framework_segment_A.mdc`, 
     `5.1.2.consolidation_framework_segment_B.mdc`или `5.1.3_consolidation_framework_segment_C.mdc`
     - Исключить неподходящие элементы, или предложить другие элементы
     - Адаптировать фреймворк с учетом специфики уже проанализированных сегментов
     - Для этого с учетом выбранных элементов агент в чат выводит необходимые критерии с пояснением использования их в разрезе решаемой бизнес задачи с учетом демо-результата в примере
   - AI агент запрашивает утверждение финального списка критериев консолидации перед началом создания таблицы
   - AI агент создает проектное правило консолидации в папке `project_rules/` с утвержденными критериями

   6.4 Создание консолидированной таблицы данных
   - AI агент использует правило `csv_consolidation_rule.mdc` для создания структурированной CSV таблицы
   - AI агент применяет следующие технические требования при создании таблицы:
     - Все значения столбцов обрамляются в двойные кавычки "" для предотвращения съезда данных
     - Внутри значений столбцов вместо двойных кавычек используются одинарные кавычки '
   - AI агент переносит данные итерационно, обрабатывая по одному паттерну (по дефолту Job Story) за раз из каждого респонденов, вносит в таблицу до 3 паттернов за одну итерацию
   - AI агент обеспечивает недопущение сокращения уникальных элементов, сохраняя все важные детали из интервью
   - AI агент при отсутствии данных в интервью обращается к профайлам респондентов для заполнения недостающей информации
   - AI агент сохраняет таблицу в папку `interviews_analysis/` под названием `consolidated_data_[ProjectName].csv`

   6.5 Верификация полноты консолидированных данных
   - AI агент проверяет соответствие данных в таблице утвержденным элементам фреймворка консолидации
   - AI агент проверяет, что все респонденты выбранного сегмента включены в консолидацию
   - AI агент проверяет отсутствие пропущенных или некорректно интерпретированных данных
   - AI агент представляет исследователю итоговую таблицу для проверки и валидации
   - Исследователь проверяет и утверждает результаты консолидации
   - AI агент вносит корректировки по замечаниям исследователя
   - AI агент получает финальное утверждение готовности данных к синтезу перед переходом к следующему этапу

7. Синтез общих знаний о сегменте
   7.1 Проверка готовности к синтезу и подготовка правил синтеза
   - AI агент уточняет у исследователя:
     - Проведены ли все запланированные интервью
     - Достаточно ли собрано инсайтов для синтеза
     - Готов ли исследователь перейти к этапу синтеза
   - Если исследователь подтверждает готовность к синтезу:
     - AI агент предлагает дефолтные правила синтеза (`6.1.1_default_synthesis_rule.mdc`) на доработку
     - Исследователь вносит необходимые корректировки в правила синтеза
     - AI агент сохраняет скорректированные правила синтеза (`6.1.2_synthesis_rule.mdc`)
   - Если исследователь не готов к синтезу:
     - AI агент предлагает продолжить сбор данных или анализ имеющихся интервью

   7.2 Синтез знаний об общих для сегмента клиентов элементах потребностей
   - AI агент предлагает исследователю критерии синтеза в соответствии с правилом `6.1.2_synthesis_rule.mdc`
   - Исследователь анализирует предложенные критерии и предоставляет обратную связь
   - AI агент вносит корректировки в правила на основе обратной связи
   - Исследователь утверждает финальную версию правил
   - AI агент осуществляет синтез потребностей с использованием утвержденного правила как промпта
   - AI агент представляет результаты в виде таблицы с общими паттернами

   7.3 Проверка результатов синтеза на отсутствие упущенных уникальных элементов
   - AI агент проверяет, что все выявленные в результате анализа потребности учтены в синтезе
   - При необходимости AI агент корректирует результаты синтеза

   7.4 Подбор подтверждающих цитат для синтезированных потребностей
   - AI агент предлагает исследователю критерии подбора цитат в соответствии с правилом `6.4.1_quotes_matching_rule.mdc`
   - Исследователь анализирует предложенные критерии и предоставляет обратную связь
   - AI агент вносит корректировки в правила на основе обратной связи
   - Исследователь утверждает финальную версию правил
   - AI агент находит для каждого элемента синтезированных потребностей до 3 различных цитат с использованием утвержденного правила как промпта
   - AI агент обеспечивает уникальность цитат и их релевантность элементам потребностей
   - AI агент сохраняет таймкоды и имена респондентов для каждой цитаты

   7.5 Верификация подтверждающих цитат
   - AI агент предлагает исследователю критерии верификации цитат в соответствии с правилом `6.5.1_quotes_verification_rule.mdc`
   - Исследователь анализирует предложенные критерии и предоставляет обратную связь
   - AI агент вносит корректировки в правила на основе обратной связи
   - Исследователь утверждает финальную версию правил
   - AI агент проверяет наличие цитат для каждого элемента потребностей с использованием утвержденного правила как промпта
   - AI агент проверяет релевантность цитат элементам потребностей
   - AI агент проверяет наличие таймкодов и имен респондентов
   - При необходимости AI агент находит дополнительные цитаты

8. Сенсмейкинг
   8.1 Определение продуктовых гипотез на основе синтезированных знаний
   - AI агент формулирует продуктовые гипотезы на основе синтезированных потребностей клиентов
   - AI агент проводит экспресс-оценку ROI для каждой гипотезы
   - AI агент представляет результаты в виде структурированного документа
   - AI агент составляет ценностное предложение для решенческих интервью

9. Релиз
   9.1 Подготовка к решенческим интервью
   - AI агент помогает команде подготовить материалы для решенческих интервью
   - AI агент формирует вопросы для валидации ценностного предложения
   - AI агент структурирует обратную связь после решенческих интервью
   - AI агент помогает скорректировать ценностное предложение на основе полученной обратной связи
</workflow_stages>

<general_process>
<process_title>Общий процесс работы с правилами для каждого этапа воркфлоу</process_title>

1. <process_step>Сбор входных данных от исследователя</process_step>
   - AI агент собирает информацию о целях, контексте и ограничениях исследования
   - Все данные тегируются в соответствии с правилом `0.3_ai_agent_prompt_tagging_rule.mdc`

2. <process_step>Утверждение дефолтных правил</process_step>
   - AI агент предлагает исследователю набор дефолтных правил для исполнения каждого этапа
   - Исследователь анализирует предложежения и предоставляет обратную связь
   - AI агент вносит корректировки в правила на основе обратной связи
   - Исследователь утверждает финально предложения агента и агент вносит замечания исследователя в правила

3. <process_step>Исполнение правил</process_step>
   - AI агент напрямую применяет утвержденные правила как промпты для обработки данных
   - AI агент сохраняет результаты в соответствующие файлы и папки согласно структуре (cм п.0)
   - Результаты представляются исследователю для анализа и обратной связи и только после этого утверждаются и обязательно записываются в соответствующие файлы в структуре. Каждое утверждение исследователем несет обязательную перезапись соответствующего результата
</general_process>

<workflow_milestones>



</workflow_milestones>