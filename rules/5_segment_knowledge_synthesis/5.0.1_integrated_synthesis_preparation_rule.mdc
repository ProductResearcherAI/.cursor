# Интегрированное правило подготовки к синтезу потребностей сегментов

**Версия:** 1.0
**Дата создания:** [Автоматически подставить текущую дату]
**Автор:** AI Ассистент
**Основано на:** Объединении этапов 5 и 6 из метаправила workflow с фокусом на консолидацию перед синтезом

## 1. Назначение правила

Данное правило определяет интегрированный процесс подготовки к синтезу потребностей клиентов, включающий:
- Консолидацию данных по определенным сегментам поведения пользователей
- Адаптацию критериев консолидации под бизнес-задачи проекта
- Подготовку структурированных данных для последующего синтеза общих паттернов

## 2. Этапы выполнения правила

### Этап 1: Определение целей синтеза на основе бизнес-задач

#### 1.1 Анализ бизнес-контекста проекта
- AI агент читает файл бизнес-задач проекта из папки `0_business_task/business_task.md`
- AI агент анализирует исследовательские вопросы проекта
- AI агент определяет ключевые метрики, на которые должен повлиять результат исследования

#### 1.2 Предложение целей синтеза
AI агент предлагает исследователю цели синтеза в формате:

**"Правильно ли я понимаю, что для решения бизнес-задачи [название из business_task.md] вам нужно:**
- Собрать представление о паттернах поведения определенных сегментов (лояльных/нелояльных/ушедших/потенциальных пользователей)
- Определить причины их поведения, мотивы покупки/отказа от текущего или конкурирующего продуктов
- Выявить сценарии применения продукта и недостающие фичи
- Понять, как коммуницировать ценность для повышения [LTV/ретеншен/активации/конверсии] 
- Сгенерировать набор фичей или пересобрать позиционирование для привлечения/удержания клиентов

**Или ваша задача синтеза иная? Уточните, пожалуйста, конкретные цели синтеза."**

#### 1.3 Утверждение целей синтеза
- AI агент получает корректировки от исследователя
- AI агент формулирует финальные цели синтеза в измеримых терминах бизнес-метрик

### Этап 2: Определение сегментов и критериев сегментации

#### 2.1 Анализ фреймворков пользователей
- AI агент анализирует `Framework_structure.md` в папке проекта
- AI агент анализирует уже созданную консолидированную таблицу (если существует)
- AI агент анализирует профайлы респондентов в папках `interview_analysis/`

#### 2.2 Выявление уникальных контекстуальных критериев
AI агент выписывает в чат найденные контекстуальные критерии поведения:

**"На основе анализа фреймворков респондентов я выявил следующие уникальные контекстуальные критерии поведения пользователей:**
- [Критерий 1]: [Описание и примеры из интервью]
- [Критерий 2]: [Описание и примеры из интервью]
- [Критерий N]: [Описание и примеры из интервью]

**Эти критерии определяют сегменты поведения пользователей. Согласны ли вы с этими критериями или нужны корректировки?**

#### 2.3 Определение логической связи между бизнес-задачей и сегментами
AI агент предлагает логическую связь в формате:

**"Правильно ли я понимаю, что для сегментов '[краткое название сегмента, ассоциируемое с выбранными признаками]' вы хотите понять:**
- Какие сценарии применения продукта у пользователей есть, но каких фичей им не хватает в [исследуемом продукте] по сравнению с конкурентами?
- Как коммуницировать ценность существующего продукта для активации в покупку?
- Что ожидают лояльные пользователи от продукта и что не нашли ушедшие пользователи?
- Как пересобрать позиционирование для привлечения большего количества клиентов выбранного сегмента?

**Подтвердите или скорректируйте задачу синтеза.**

### Этап 3: Создание файла целей синтеза

#### 3.1 Создание папки synthesis (если не создана)
- AI агент проверяет наличие папки `synthesis/` в корне проекта
- При отсутствии создает папку `synthesis/`

#### 3.2 Создание файла synthesis_goals.md
AI агент создает файл `synthesis/synthesis_goals.md` со следующей структурой:

```markdown
# Цели синтеза для проекта [Project_Name]

## Бизнес-задачи проекта
[Переписывается из business_task.md]

## Измеримый результат для бизнеса
**Целевые метрики:** [LTV, retention, активация, конверсия и тд]
**Ожидаемый эффект:** [Рост определенных метрик в %]

## Критерии сегментов для синтеза
**Выбранные признаки сегментов:**
- [Признак 1]: [Описание]
- [Признак 2]: [Описание]

## Задача синтеза
**Для сегментов:** [Краткое название сегментов]
**Цель синтеза:** [Утвержденная формулировка задачи синтеза]

## Дата создания
[Текущая дата]
```

### Этап 4: Анализ недостающих элементов для консолидации

#### 4.1 Определение типа исследуемых сегментов
AI агент анализирует утвержденные цели синтеза и определяет, к какому типу относятся исследуемые сегменты:
- **Сегмент А** (лояльные клиенты) - используют продукт и довольны
- **Сегмент Б** (ушедшие клиенты) - использовали продукт, но отказались от него  
- **Сегмент С** (потенциальные клиенты) - не используют продукт, но рассматривают возможность

#### 4.2 Анализ релевантного правила консолидации
AI агент читает соответствующее правило консолидации:
- Для сегмента А: `5.1.1_consolidation_framework_segment_A.mdc`
- Для сегмента Б: `5.1.2_consolidation_framework_segment_B.mdc`
- Для сегмента С: `5.1.3_consolidation_framework_segment_C.mdc`

#### 4.3 Сопоставление с текущими данными
- AI агент анализирует `Framework_structure.md`
- AI агент анализирует уже созданную консолидированную таблицу (если существует)
- AI агент выявляет отсутствующие элементы из релевантного правила консолидации

#### 4.4 Предложение критериев для дособирания
AI агент выписывает в чат:

**"Для решения задачи синтеза '[задача из synthesis_goals.md]' и работы с сегментом [А/Б/С] необходимо дособрать/включить/исключить следующие критерии:**

**ДОСОБРАТЬ:**
- [Элемент 1]: [Обоснование в контексте бизнес-задачи]
- [Элемент 2]: [Обоснование в контексте бизнес-задачи]

**ВКЛЮЧИТЬ (из уже собранных):**
- [Элемент 1]: [Обоснование важности]
- [Элемент 2]: [Обоснование важности]

**ИСКЛЮЧИТЬ (не релевантные для синтеза):**
- [Элемент 1]: [Обоснование исключения]
- [Элемент 2]: [Обоснование исключения]

**Согласны ли вы с этим перечнем критериев?**

### Этап 5: Финализация критериев консолидации

#### 5.1 Получение утверждения исследователя
- AI агент получает корректировки от исследователя
- AI агент формулирует финальный перечень критериев консолидации

#### 5.2 Обновление файла synthesis_goals.md
AI агент дополняет файл `synthesis/synthesis_goals.md` разделом:

```markdown
## Финальные критерии консолидации
**Элементы для включения в таблицу консолидации:**
- [Элемент 1]: [Краткое описание и источник]
- [Элемент 2]: [Краткое описание и источник]

**Обоснование выбора:** [Связь с бизнес-задачей и целями синтеза]
```

### Этап 6: Создание адаптированного правила консолидации

#### 6.1 Выбор базового правила
AI агент выбирает наиболее релевантное правило из:
- `5.1.1_consolidation_framework_segment_A.mdc`
- `5.1.2_consolidation_framework_segment_B.mdc`  
- `5.1.3_consolidation_framework_segment_C.mdc`

#### 6.2 Адаптация правила под проект
AI агент создает файл `synthesis/project_consolidation_rule.mdc` на основе выбранного правила с изменениями:

**В разделе "Назначение правила":**
- Бизнес-задача: [из synthesis_goals.md]
- Задача синтеза: [из synthesis_goals.md]
- Исследуемый сегмент: [А/Б/С с описанием]
- Условные признаки сегмента: [из утвержденных критериев]

**В разделе "Дефолтные элементы фреймворка консолидации":**
- Заменяет "Сегмент" на краткое описание исследуемого сегмента
- Заменяет "Контекст" на возможные контексты из утвержденных критериев  
- Оставляет только утвержденные параметры из финального перечня

#### 6.3 Добавление технических требований
AI агент добавляет в правило раздел с техническими требованиями консолидации:

```markdown
## Технические требования консолидации

### Формат шапки результирующей CSV таблицы
**Структура заголовков:**
- Первая строка: [Утвержденные названия столбцов]
- Вторая строка: [Пояснения к столбцам]

### Процесс сбора данных
1. **Источники данных:** Framework_structure.md и/или существующая консолидированная таблица с дополнительными данными из гайдов интервью в случае их отсутствия без додумывания
2. **Итерационный подход:** По одному паттерну (Job Story) за раз
3. **Технические требования CSV:** 
   - Все значения в двойных кавычках ""
   - Внутри значений только одинарные кавычки '
4. **Недостающие данные:** Обращение к профайлам респондентов
```

### Этап 7: Создание таблицы консолидации

#### 7.1 Создание пустой таблицы
AI агент создает файл `synthesis/consolidated_data_[ProjectName].csv` с:
- Шапкой из утвержденных критериев
- Строкой пояснений к критериям
- Пустыми строками для данных

#### 7.2 Проверка соответствия критериям
AI агент проверяет:
- Все ли утвержденные элементы представлены в таблице
- Соответствует ли формат техническим требованиям
- Корректно ли указаны пояснения к столбцам

#### 7.3 Уведомление о готовности к консолидации
AI агент сообщает исследователю:

**"Таблица консолидации создана с утвержденными параметрами:**
- Файл: `synthesis/consolidated_data_[ProjectName].csv`
- Критерии: [Список утвержденных элементов]
- Адаптированное правило: `synthesis/project_consolidation_rule.mdc`

**Готов перейти к консолидации данных из профайлов респондентов. Подтверждаете переход к сбору данных?**

### Этап 8: Переход к консолидации данных

#### 8.1 Сбор данных из источников
- AI агент использует адаптированное правило `synthesis/project_consolidation_rule.mdc`
- AI агент применяет техническое правило `csv_consolidation_rule.mdc`
- AI агент итерационно обрабатывает данные респондентов

#### 8.2 Заполнение таблицы консолидации
- AI агент переносит данные с соблюдением технических требований
- AI агент обеспечивает полноту данных по всем утвержденным критериям
- AI агент проверяет корректность формата CSV

#### 8.3 Верификация результатов консолидации
AI агент представляет исследователю:
- Заполненную таблицу консолидации
- Статистику по количеству обработанных респондентов
- Отчет о полноте данных по критериям

#### 8.4 Готовность к синтезу
После утверждения результатов консолидации AI агент переходит к этапу синтеза с использованием правила `5.1.4_default_synthesis_rule.mdc`

## 3. Критерии успешного выполнения правила

### 3.1 Обязательные результаты
- Создан файл `synthesis/synthesis_goals.md` с утвержденными целями
- Создано адаптированное правило `synthesis/project_consolidation_rule.mdc`  
- Создана таблица `synthesis/consolidated_data_[ProjectName].csv`
- Данные консолидированы в соответствии с утвержденными критериями

### 3.2 Качественные критерии
- Цели синтеза связаны с бизнес-задачами проекта
- Критерии сегментации обоснованы контекстом исследования
- Адаптированное правило соответствует специфике проекта
- Таблица консолидации содержит полные и структурированные данные

## 4. Связь с другими правилами

### 4.1 Входящие зависимости
- `000-cursor-rules.mdc` - основные принципы работы агента
- `Framework_structure.md` - структура фреймворка проекта
- `0_business_task/business_task.md` - бизнес-задачи проекта

### 4.2 Исходящие зависимости  
- `5.1.4_default_synthesis_rule.mdc` - правило синтеза паттернов
- `csv_consolidation_rule.mdc` - технические требования к CSV
- Правила консолидации сегментов A, B, C - базовые фреймворки

### 4.3 Создаваемые файлы
- `synthesis/synthesis_goals.md` - цели и задачи синтеза
- `synthesis/project_consolidation_rule.mdc` - адаптированное правило
- `synthesis/consolidated_data_[ProjectName].csv` - таблица данных

## 5. Примечания по применению

### 5.1 Гибкость адаптации
- Правило адаптируется под любой тип проекта (B2B/B2C)
- Поддерживает работу с смешанными сегментами пользователей
- Позволяет включать/исключать критерии на основе бизнес-задач

### 5.2 Техническая совместимость
- Соблюдает требования CSV-формата для предотвращения ошибок
- Обеспечивает трассируемость от бизнес-задач к результатам синтеза
- Поддерживает итерационный подход к консолидации данных

<version>1.0</version>
description:
globs:
alwaysApply: false
---
