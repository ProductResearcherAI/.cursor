---
description: 
globs: 
alwaysApply: false
---
# Правило консолидации данных фреймворка в таблицу

**Версия:** 3.0  


## 1. Назначение правила

Данное правило определяет процесс создания консолидированной таблицы потребностей респондента на основе заполненного фреймворка. Обеспечивает техническую совместимость CSV файлов и включает обязательную проверку исследователем перед переносом данных в финальную таблицу.

## 2. Входные данные

### 2.1. Исходные файлы:
- **Заполненный фреймворк респондента:** `Framework_filled_[respondent_name].md`
- **Структура фреймворка проекта:** `Framework_structure.md` из папки проекта
- **Файл с бизнес-задачами:** из папки `0_business_task/` для контекста

### 2.2. Требования к заполненному фреймворку:
- Полные формулировки потребностей без общих фраз
- Конкретные цифры и детали из интервью
- Профессиональная терминология респондента
- Четкие цитаты-подтверждения каждого элемента

### 2.3. Адаптивная структура с двухуровневой шапкой
В соответствии с мета-правилом (этап 4.4), перед созданием таблицы и внесением в нее первой записи AI агент согласует структуру колонок с исследователем (по дефолту) на основании Framework_Structrue.md. Таблица будет иметь двухуровневый заголовок для лучшей читаемости.


После утверждения создает структуру таблицы

## 3.3. Шаг 3: Создание итерационной таблицы

#### 3.3.1. Процесс утверждения структуры
Процесс создания таблицы строго регламентирован для обеспечения гибкости и соответствия целям конкретного исследования:

1.  **Предложение структуры:** AI Агент предлагает структуру колонок на основе `Framework_structure.md`.

**Блок для адаптации:** 
# Пример структуры для утверждения
- Группа "Контекст респондента":
  - "Имя респондента": "Полное имя или псевдоним"
  - "Сегмент": "Целевой сегмент, к которому относится респондент"
- Группа "Анализ потребности":
  - "Потребность (Job Story)": "Формулировка основной задачи пользователя"
  - "Проблемы": "Список проблем, с которыми сталкивается пользователь"
  - "Готовность платить": "Сумма или диапазон, который пользователь готов заплатить"
- Группа "Решения":
  - "Идеальное решение": "Описание идеального решения по мнению пользователя"
  - "Текущее решение": "Какое решение используется сейчас"
  - "Оценка текущего решения (1-10)": "Оценка удовлетворенности текущим решением"

AI агент предлагает этот блок на на утверждение исследователю и вносит в него изменения после утверждения исследователем 

2.  **Утверждение исследователем:** Исследователь утверждает или изменяет предложенную структуру, включая названия групп, заголовков и их пояснения.
3.  **Модификация правила:** AI Агент **программно изменяет блок 3.3.2 в этом правиле**, записывая в него утвержденную структуру таблицы.
4.  **Сохранение правила для проекта:** AI Агент **сохраняет новую версию этого правила** в папку `project_rules` текущего проекта. Это правило становится эталоном для данного исследования.
5.  **Создание таблицы:** AI Агент использует проектную версию правила для создания CSV файла с утвержденной двухуровневой шапкой.
6.  **Итерационное наполнение:** Данные по каждому респонденту добавляются в таблицу новой строкой.

#### 3.3.2. Утвержденный адаптированный блок структуры таблицы
**ВНИМАНИЕ: Этот блок изменяется AI Агентом после утверждения структуры с исследователем до начала создания таблицы.**

Агент вносит в правило утвержденную структуру:
Groups:
  - Name: "Контекст респондента"
    Columns:
      - Header: "Имя респондента"
        Description: "Полное имя или псевдоним"
      - Header: "Сегмент"
        Description: "Целевой сегмент, к которому относится респондент"
      - Header: "Потребность (Job Story)"
        Description: "Формулировка основной задачи пользователя"
      - Header: "Проблемы"
        Description: "Список проблем, с которыми сталкивается пользователь"
      - Header: "Готовность платить"
        Description: "Сумма или диапазон, который пользователь готов заплатить"
  - Name: "Решения"
    Columns:
      - Header: "Идеальное решение"
        Description: "Описание идеального решения по мнению пользователя"
      - Header: "Текущее решение"
        Description: "Какое решение используется сейчас"
      - Header: "Оценка текущего решения (1-10)"
        Description: "Оценка удовлетворенности текущим решением"
```
Агент вносит также изменения в формат результирующей таблицы

#### 3.3.3. Формат результирующей CSV таблицы
```csv
"Контекст респондента","Контекст респондента","Анализ потребности","Анализ потребности","Анализ потребности","Решения","Решения","Решения"
"Имя респондента","Сегмент","Потребность (Job Story)","Проблемы","Готовность платить","Идеальное решение","Текущее решение","Оценка текущего решения (1-10)"
"Dr Adams","Сегмент А","Когда я анализирую сложный клинический случай...","'Сложно найти нужную процедуру...'","$200-300/месяц","Библиотека кейсов с поиском...","OHI-S платформа","4"

Затем итерационно осуществляет консолидацию данных:

## 3. Процесс консолидации (пошагово)

### 3.1. Шаг 1: Анализ профайла респондента
AI агент анализирует профайл респондента из `Framework_filled_[respondent_name].md` и выписывает в чат тезисно заполненные элементы для переноса в таблицу в соответствии с утвержденным форматом в этом правиле, например:

#### 3.1.1. Функциональные ожидания:

#### 3.1.2. Идеальные решения:
- **Для каждого ожидания:** описание идеального решения в понимании респондента

#### 3.1.3. Текущие решения и оценки:
- **Продукт компании:** текущее решение + оценка удовлетворенности (0-10)
- **Конкуренты:** используемые альтернативы + оценки удовлетворенности

#### 3.1.4. Проблемы (при удовлетворенности <10):
- **Конкретные проблемы** с указанием причин низких оценок
- **Цитаты-подтверждения** из интервью

#### 3.1.5. Предложения доработки:
- **Способы повышения удовлетворенности до 10** для каждой проблемы
- **Приоритеты улучшений** с точки зрения респондента

#### 3.1.6. Готовность платить или влияние на улучшение метрик при закрытии ожидания:
- **За закрытие каждого ожидания:** цифры или диапазоны
- **Обоснование ценности** в словах респондента

### 3.2. Шаг 2: Исследователь проверяет точность, полноту и консистентность извлеченных данных:

#### 3.2.1. Чек-лист для исследователя:
- [ ] **Точность:** все данные соответствуют содержанию заполненного фреймворка
- [ ] **Полнота:** все важные элементы интервью включены в консолидацию
- [ ] **Консистентность:** нет противоречий между разными частями данных
- [ ] **Детализация:** сохранены конкретные цифры, имена, примеры
- [ ] **Цитаты:** подтверждающие цитаты соответствуют выводам

#### 3.2.2. Процедура АКЦЕПТА:
1. Исследователь изучает выписанные AI агентом данные
2. Сравнивает их с исходным заполненным фреймворком
3. Вносит необходимые корректировки и дополнения
4. Дает ЯВНОЕ ПОДТВЕРЖДЕНИЕ: "Данные проверены и готовы к переносу в таблицу"

**⚠️ ВАЖНО:** AI агент переходит к шагу 3 ТОЛЬКО после получения акцепта исследователя
ла:
`
# Пример структуры для утверждения
- Группа "Контекст респондента":
  - "Имя респондента": "Полное имя или псевдоним"
  - "Сегмент": "Целевой сегмент, к которому относится респондент"
- Группа "Анализ потребности":
  - "Потребность (Job Story)": "Формулировка основной задачи пользователя"
  - "Проблемы": "Список проблем, с которыми сталкивается пользователь"
  - "Готовность платить": "Сумма или диапазон, который пользователь готов заплатить"
- Группа "Решения":
  - "Идеальное решение": "Описание идеального решения по мнению пользователя"
  - "Текущее решение": "Какое решение используется сейчас"
  - "Оценка текущего решения (1-10)": "Оценка удовлетворенности текущим решением"

Агент вносит в созданную таблицу данные в соответствии с техническими требованиями для CSV
#### 3.3.1. Технические требования к CSV:
- **Все значения столбцов обрамляются в двойные кавычки** 
`""` для предотвращения съезда данных
- **Внутри значений столбцов вместо двойных кавычек 
используются одинарные** `'`
- **Разделитель:** запятая `,`
