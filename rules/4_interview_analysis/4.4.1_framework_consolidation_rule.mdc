---
description: 
globs: 
alwaysApply: false
---
# Правило консолидации данных фреймворка в таблицу

**Версия:** 3.0  


## 1. Назначение правила

Данное правило определяет процесс создания консолидированной таблицы потребностей респондента на основе заполненного фреймворка. Обеспечивает техническую совместимость CSV файлов и включает обязательную проверку исследователем перед переносом данных в финальную таблицу.

## 2. Входные данные

### 2.1. Исходные файлы:
- **Заполненный фреймворк респондента:** `Framework_filled_[respondent_name].md`
- **Структура фреймворка проекта:** `Framework_structure.md` из папки проекта
- **Файл с бизнес-задачами:** из папки `0_business_task/` для контекста

### 2.2. Требования к заполненному фреймворку:
- Полные формулировки элементов фреймворка без общих фраз
- Конкретные цифры и детали из интервью
- Профессиональная терминология респондента
- Четкие цитаты-подтверждения каждого элемента

### 2.3. Адаптивная структура с двухуровневой шапкой
В соответствии с мета-правилом (этап 4.4), перед созданием таблицы и внесением в нее первой записи AI агент согласует структуру колонок с исследователем (по дефолту) на основании Framework_Structrue.md. Таблица будет иметь двухуровневый заголовок для лучшей читаемости (строка заголовка и строка с пояснением заголовка)

После утверждения создает структуру таблицы

## 3.3. Шаг 3: Создание итерационной таблицы

#### 3.3.1. Процесс утверждения структуры
Процесс создания таблицы строго регламентирован для обеспечения гибкости и соответствия целям конкретного исследования:

1.  **Предложение структуры:** AI Агент предлагает структуру колонок на основе `Framework_structure.md`.

**Блок для адаптации:** 
# Пример структуры для утверждения исследователем
- Группа "Контекст респондента":
  - "Имя респондента": "Полное имя или псевдоним"
  - "Сегмент": "Целевой сегмент, к которому относится респондент"
- Группа "Анализ потребности":
  - "Потребность (Job Story)": "Формулировка основной задачи пользователя"
  - "Проблемы": "Список проблем, с которыми сталкивается пользователь"
  - "Готовность платить": "Сумма или диапазон, который пользователь готов заплатить"
- Группа "Решения":
  - "Идеальное решение": "Описание идеального решения по мнению пользователя"
  - "Текущее решение": "Какое решение используется сейчас"
  - "Оценка текущего решения (1-10)": "Оценка удовлетворенности текущим решением потребности пользователя"

AI агент предлагает этот блок на на утверждение исследователю адаптированный под `Framework_structure.md` и вносит в порядок его элементов изменения после утверждения исследователем 

2.  **Утверждение исследователем:** Исследователь утверждает или изменяет предложенную структуру, включая названия заголовков и их пояснения.
3.  **Модификация правила:** AI Агент **программно изменяет блок 3.3.2 в этом правиле**, записывая в него утвержденную структуру таблицы.
4.  **Сохранение правила для проекта:** AI Агент **сохраняет новую версию этого правила** в папку `project_rules` текущего проекта. Это правило становится правилом консолидации
5.  **Создание таблицы:** AI Агент использует проектную версию правила для создания CSV файла с утвержденной двухуровневой шапкой.
6.  **Итерационное наполнение:** Данные по каждому респонденту добавляются в таблицу новой строкой.

#### 3.3.2. Структура консолидированной таблицы

**ВНИМАНИЕ: Этот блок адаптируется AI Агентом под специфику проекта на основе Framework_structure.md после утверждения структуры с исследователем до начала создания таблицы.**

### Базовая идентификация (столбцы 1-4)
- `"ID записи"` - уникальный идентификатор для каждой строки
- `"Имя респондента"` - для отслеживания источника данных  
- `"Файл источника"` - Framework_filled_[respondent_name].md
- `"Сегмент"` - будет заполнен на этапе сегментации

### Контекстные характеристики респондента (столбцы 5-10)
- `"Профессиональный контекст"` - специализация, опыт, особенности деятельности
- `"Формат работы"` - организационная структура, команда, географическое расположение
- `"Инвестиции в развитие"` - текущие бюджеты и стратегические планы
- `"Бизнес-контекст"` - партнерства, проекты, особенности клиентуры
- `"Core Job (основная задача)"` - полная формулировка Job Story респондента
- `"Драйвер основной задачи"` - ключевая мотивация из Job Story с подтверждающей цитатой

### Функциональные ожидания к продукту/решению (столбцы 11-21)
- `"Функциональные ожидания"` - перечень всех ожиданий с контекстами применения
- `"Важность ожиданий (1-10)"` - перечень оценок критичности для каждого ожидания
- `"Идеальные решения для ожиданий"` - перечень характеристик для 10-балльного закрытия каждого ожидания
- `"Текущие решения для ожиданий"` - перечень характеристик существующих решений для каждого ожидания
- `"Удовлетворенность текущими решениями (1-10)"` - перечень оценок текущих решений для каждого ожидания
- `"Проблемы текущих решений"` - перечень конкретных недостатков при удовлетворенности <10
- `"Альтернативные решения"` - перечень характеристик альтернативных решений для каждого ожидания
- `"Удовлетворенность альтернативами (1-10)"` - перечень оценок альтернативных решений
- `"Проблемы альтернатив"` - перечень недостатков альтернативных решений при <10
- `"Предложения улучшений"` - перечень конкретных улучшений для достижения 10/10 для каждого ожидания
- `"Готовность платить за ожидания ($)"` - перечень сумм за идеальное закрытие каждого ожидания

### Функциональные ожидания к формату взаимодействия (столбцы 22-32)
- `"Ожидания к формату"` - перечень всех ожиданий к формату взаимодействия/использования
- `"Важность ожиданий к формату (1-10)"` - перечень оценок критичности для каждого ожидания к формату
- `"Идеальные решения для формата"` - перечень характеристик формата для 10-балльного закрытия каждого ожидания
- `"Текущие форматы"` - перечень характеристик существующих форматов для каждого ожидания
- `"Удовлетворенность форматами (1-10)"` - перечень оценок текущих форматов для каждого ожидания
- `"Проблемы текущих форматов"` - перечень конкретных недостатков при удовлетворенности <10
- `"Альтернативные форматы"` - перечень характеристик альтернативных форматов для каждого ожидания
- `"Удовлетворенность альтернативными форматами (1-10)"` - перечень оценок альтернативных форматов
- `"Проблемы альтернативных форматов"` - перечень недостатков альтернативных форматов при <10
- `"Предложения улучшения формата"` - перечень конкретных улучшений формата для достижения 10/10
- `"Готовность платить за формат ($)"` - перечень сумм за идеальное закрытие каждого ожидания к формату

### Функциональные ожидания к сервису/поддержке (столбцы 33-43)  
- `"Ожидания к сервису"` - перечень всех ожиданий к сервису/поддержке
- `"Важность ожиданий к сервису (1-10)"` - перечень оценок критичности для каждого ожидания к сервису
- `"Идеальные решения для сервиса"` - перечень характеристик сервиса для 10-балльного закрытия каждого ожидания
- `"Текущий сервис"` - перечень характеристик существующего сервиса для каждого ожидания
- `"Удовлетворенность сервисом (1-10)"` - перечень оценок текущего сервиса для каждого ожидания
- `"Проблемы текущего сервиса"` - перечень конкретных недостатков при удовлетворенности <10
- `"Альтернативный сервис"` - перечень характеристик альтернативного сервиса для каждого ожидания
- `"Удовлетворенность альтернативным сервисом (1-10)"` - перечень оценок альтернативного сервиса
- `"Проблемы альтернативного сервиса"` - перечень недостатков альтернативного сервиса при <10
- `"Предложения улучшения сервиса"` - перечень конкретных улучшений сервиса для достижения 10/10
- `"Готовность платить за сервис ($)"` - перечень сумм за идеальное закрытие каждого ожидания к сервису

### Этапы основной задачи и соотнесение (столбцы 44-45)
- `"Этапы основной задачи респондента"` - перечень этапов из профайла респондента
- `"Соотнесение ожиданий к этапам"` - иерархический список "Этап / соответствующие ожидания"

### Подтверждающие цитаты (столбцы 46-49)
- `"Цитата Core Job"` - подтверждение основной задачи
- `"Цитата ключевого ожидания к продукту"` - самое важное ожидание
- `"Цитата ключевого ожидания к формату"` - самое важное ожидание к формату
- `"Цитата ключевого ожидания к сервису"` - самое важное ожидание к сервису

**Примечание:** Конкретная структура адаптируется под Framework_structure.md проекта. AI агент предлагает соответствующую структуру на утверждение исследователю и модифицирует данный блок после утверждения.

#### 3.3.3. Формат шапки результирующей CSV таблицы (этот блок адаптируется Аи агентом после утверждения параметров таблицы и соответствует блоку 3.3.2)
```csv
"Контекст респондента","Контекст респондента","Анализ потребности","Анализ потребности","Анализ потребности","Решения","Решения","Решения"
"Имя респондента","Сегмент","Потребность (Job Story)","Проблемы","Готовность платить","Идеальное решение","Текущее решение","Оценка текущего решения (1-10)"
"Dr Adams","Сегмент А","Когда я анализирую сложный клинический случай...","'Сложно найти нужную процедуру...'","$200-300/месяц","Библиотека кейсов с поиском...","OHI-S платформа","4"

Затем итерационно осуществляет консолидацию данных:

## 3. Процесс консолидации (пошагово)

### 3.1. Шаг 1: Анализ профайла респондента
AI агент анализирует профайл респондента из `Framework_filled_[respondent_name].md` и выписывает в чат тезисно заполненные элементы для переноса в таблицу в соответствии с утвержденным форматом  в п 3.3.2 этого правила

### 3.2. Шаг 2: Исследователь проверяет точность, полноту и консистентность извлеченных данных:

#### 3.2.1. Чек-лист для исследователя:
- [ ] **Точность:** все детали каждого элемента в столбце консолидированной таблицы соответствуют структуре фреймворка
- [ ] **Полнота:** все детали каждого элемента фреймворка включены в консолидацию
- [ ] **Консистентность:** нет противоречий в логической связи между релевантными элементами фреймворка в их списке
- [ ] **Детализация:** сохранены конкретные цифры, имена, примеры
- [ ] **Цитаты:** подтверждающие цитаты соответствуют выводам

#### 3.2.2. Процедура АКЦЕПТА:
1. Исследователь изучает выписанные AI агентом данные
2. Сравнивает их с исходным заполненным фреймворком
3. Вносит необходимые корректировки и дополнения
4. Дает ЯВНОЕ ПОДТВЕРЖДЕНИЕ: "Данные проверены и готовы к переносу в таблицу"

**⚠️ ВАЖНО:** AI агент переходит к шагу 3 ТОЛЬКО после получения акцепта исследователя

Агент вносит в созданную таблицу данные в соответствии с техническими требованиями для CSV 'csv_consolidation_rule.mdc'

#### 3.3.1. Технические требования к CSV:
- **Все значения столбцов обрамляются в двойные кавычки** 
`""` для предотвращения съезда данных
- **Внутри значений столбцов вместо двойных кавычек 
используются одинарные** `'`
- **Разделитель:** запятая `,`

## 4. Этапы заполнения консолидированной таблицы

### 4.1. Этап 1: Базовая идентификация
**Источник данных:** Заголовок файла Framework_filled_[respondent_name].md
**Заполняемые столбцы:** 1-4
**Действия:**
- Присваивание уникального ID записи
- Указание имени респондента из имени файла
- Фиксация источника данных
- Оставление поля "Сегмент" для последующего заполнения

### 4.2. Этап 2: Контекстные характеристики
**Источник данных:** Разделы фреймворка о профиле респондента
**Заполняемые столбцы:** 5-10
**Действия:**
- Извлечение профессионального контекста из описания деятельности респондента
- Определение формата работы из организационной структуры
- Фиксация данных об инвестициях в развитие из бюджетных показателей
- Описание бизнес-контекста из особенностей деятельности
- Формулировка Core Job из основной задачи респондента
- Выделение ключевого драйвера с подтверждающей цитатой

### 4.3. Этап 3: Функциональные ожидания к продукту/решению
**Источник данных:** Разделы фреймворка о функциональных ожиданиях
**Заполняемые столбцы:** 11-21
**Действия:**
- Перечисление всех функциональных ожиданий с контекстами
- Проставление оценок важности по шкале 1-10
- Описание идеальных решений для каждого ожидания
- Фиксация характеристик текущих решений
- Проставление оценок удовлетворенности текущими решениями
- Описание проблем при неполном удовлетворении (<10 баллов)
- Фиксация альтернативных решений и их оценок
- Формулировка предложений по улучшению
- Указание готовности платить за идеальное решение каждого ожидания

### 4.4. Этап 4: Функциональные ожидания к формату
**Источник данных:** Разделы фреймворка о форматах взаимодействия
**Заполняемые столбцы:** 22-32
**Действия:**
- Аналогичная структура заполнения как в этапе 4.3
- Фокус на форматах взаимодействия/использования продукта
- Оценка текущих и альтернативных форматов
- Формулировка улучшений для достижения максимального удовлетворения

### 4.5. Этап 5: Функциональные ожидания к сервису
**Источник данных:** Разделы фреймворка о сервисе и поддержке
**Заполняемые столбцы:** 33-43
**Действия:**
- Аналогичная структура заполнения как в этапах 4.3-4.4
- Фокус на сервисных ожиданиях и поддержке
- Анализ текущего и альтернативного сервиса
- Предложения по улучшению сервисного обслуживания

### 4.6. Этап 6: Этапы задач и соотнесение
**Источник данных:** Разделы фреймворка об этапах основной задачи
**Заполняемые столбцы:** 44-45
**Действия:**
- Перечисление всех этапов основной задачи респондента
- Создание иерархического списка соотнесения ожиданий к этапам
- Формат: "Этап 1 / соответствующие ожидания; Этап 2 / соответствующие ожидания"

### 4.7. Этап 7: Подтверждающие цитаты
**Источник данных:** Цитаты из интервью в заполненном фреймворке
**Заполняемые столбцы:** 46-49
**Действия:**
- Выбор наиболее яркой цитаты, подтверждающей Core Job
- Отбор цитаты для самого важного ожидания к продукту (с максимальной оценкой важности)
- Отбор цитаты для самого важного ожидания к формату
- Отбор цитаты для самого важного ожидания к сервису

### 4.8. Контроль качества заполнения
**Проверяемые аспекты:**
- Соответствие данных исходному фреймворку
- Полнота переноса всех элементов
- Логическая связность между элементами
- Сохранение конкретных деталей и цифр
- Корректность цитат и их релевантность выводам

**Процедура валидации:**
1. Сверка каждого столбца с соответствующим разделом фреймворка
2. Проверка математической логики оценок (1-10)
3. Верификация цитат на предмет точности воспроизведения
4. Контроль технических требований к CSV формату
