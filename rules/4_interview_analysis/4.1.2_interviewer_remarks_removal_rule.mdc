# Правило удаления заметок исследователя из интервью

## Описание
Это правило определяет процесс фильтрации текста интервью для извлечения и обработки только ответов респондента. Правило обеспечивает сохранение всего семантического содержания ответов респондента при полном удалении вопросов и замечаний интервьюера.

## Роль и ответственность
AI-агент выступает в роли специалиста по фильтрации текста, который извлекает и обрабатывает только ответы респондента из транскриптов интервью.

## Правила фильтрации текста

### Основные правила
1. Отфильтровать все элементы, принадлежащие интервьюеру
2. Сохранить только ответы респондента
3. Проверить, что каждый текстовый элемент правильно атрибутирован говорящему
4. Сохранить контекст и связность ответов респондента
5. Сохранить все таймстемпы и индикаторы говорящих для респондента
6. Не добавлять информацию, которой не было в исходном тексте
7. Не изменять ответы респондента, кроме удаления замечаний интервьюера

### Критерии фильтрации
#### Элементы для удаления:
1. Все вопросы и замечания интервьюера
2. Уточнения и подсказки интервьюера
3. Подтверждения и согласия интервьюера
4. Любой текст, четко атрибутированный интервьюеру

#### Элементы для сохранения:
1. Все ответы и замечания респондента
2. Эмоциональные выражения и реакции респондента
3. Описания проблем и болевых точек респондента
4. Описания желаемых результатов или целей респондента
5. Не изменяемый пункт правил! все структурные элементы (номера чанков, таймстемпы, индикаторы говорящих)

### Требования к сохранению
1. Все семантическое содержание от респондента должно быть сохранено
2. Не изменяемый пункт правил! Все структурные элементы (номера чанков, таймстемпы, индикаторы говорящих) должны быть сохранены
3. Аутентичность речевых паттернов респондента должна быть сохранена
4. Не должна добавляться информация, которой не было в оригинале
5. Не должно удаляться семантическое содержание от респондента

## Процесс проверки фильтрации текста

### 1. Предварительная проверка
- Не изменяемый пункт правил! Проверка наличия всех структурных элементов (нумерация, таймстемпы, индикаторы)
- Проверка полноты предложений и абзацев
- Проверка правильной атрибуции говорящих

### 2. Проверка в процессе фильтрации
- Анализ каждого элемента на принадлежность интервьюеру или респонденту
- Проверка контекста для сохранения связности ответов респондента
- Сохранение всех элементов, принадлежащих респонденту

### 3. Финальная проверка
- Проверка удаления всех замечаний интервьюера
- Проверка сохранения всех ответов респондента
- Проверка сохранения всех структурных элементов
- Проверка отсутствия додумывания или добавления информации
- Валидация формата JSON и структуры вывода

## Примеры фильтрации текста

### Пример 1: Удаление вопросов интервьюера
**Исходный текст**:
```
1.5 (Интервьюер | 15:30) Расскажите о вашем опыте использования нашего продукта?
(Респондент | 15:35) Я использую его около 3 месяцев. В целом он хороший, но иногда зависает.
(Интервьюер | 15:42) Интересно. Как часто он зависает?
(Респондент | 15:45) Может быть раз или два в неделю, обычно когда я пытаюсь сохранить большие файлы.
```

**Отфильтрованный текст**:
```
1.5 (Респондент | 15:35) Я использую его около 3 месяцев. В целом он хороший, но иногда зависает.
(Респондент | 15:45) Может быть раз или два в неделю, обычно когда я пытаюсь сохранить большие файлы.
```

### Пример 2: Сохранение контекста ответов
**Исходный текст**:
```
2.3 (Интервьюер | 10:15) Какие проблемы вы испытываете при использовании приложения?
(Респондент | 10:20) Главная проблема - это скорость загрузки. Иногда приходится ждать очень долго.
(Интервьюер | 10:25) А как долго вы обычно ждете?
(Респондент | 10:28) Иногда до минуты, что очень раздражает, когда я спешу.
```

**Отфильтрованный текст**:
```
2.3 (Респондент | 10:20) Главная проблема - это скорость загрузки. Иногда приходится ждать очень долго.
(Респондент | 10:28) Иногда до минуты, что очень раздражает, когда я спешу.
```

## Формат JSON для вывода

```json
{
  "chunk_id": "X.Y",
  "text": "Отфильтрованный текст, содержащий только ответы респондента с сохранением всех таймстемпов и индикаторов говорящих."
}
```

### Важные требования к выходным данным:
1. Все семантическое содержание от респондента должно быть сохранено
2. JSON должен быть правильно отформатирован и валиден

## Финальная валидация
Перед отправкой ответа необходимо проверить, что:
1. Удалены все замечания интервьюера
2. Не добавлена информация, которой не было в исходном тексте
3. Не удалено семантически значимое содержание от респондента
4. Не изменяемый пункт правил! Все cистемные маркеры, например номера текста или номера чанков текста сохранены
5. Все таймстемпы и индикаторы говорящих для респондента сохранены
6. Структура JSON валидна и соответствует требуемому формату
7. Отфильтрованный текст сохраняет исходный смысл ответов респондента

## Обязательные теги для промптов фильтрации текста

### Системные теги
- `<Role>` - определяет роль AI-агента как специалиста по фильтрации текста
- `<InputValidation>` - инструкции по проверке входных данных
- `<Rules>` - правила фильтрации текста
- `<CleaningCriteria>` - критерии для определения элементов для удаления и сохранения
- `<PreservationRequirements>` - требования к сохранению элементов
- `<Examples>` - примеры фильтрации текста
- `<OutputFormat>` - спецификация формата вывода
- `<FinalValidation>` - проверка перед отправкой ответа

### Пользовательские теги
- `<Instructions>` - пронумерованные инструкции для выполнения
- `<InputText>` - входной текст для фильтрации
- `<ResearchContext>` - контекст исследования для определения семантической значимости

## Интеграция с другими правилами
Это правило должно использоваться совместно с:
- `01_meta-rule-analyzis-synthesis workflow.mdc` - для определения места в общем процессе анализа
- `02_airesearch_agent_prompt_engeniring_rule.mdc` - для структурирования промптов
- `03_ai_agent_prompt_tagging_rule.mdc` - для обеспечения согласованности тегов
- `04_text_cleaning_rule.mdc` - для общих принципов очистки текста 